<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RT-Chapp</title>
    <style>
        body{
            background-color: rgb(95, 95, 95);
            color:rgb(221, 221, 221);
        }
        .chat-container{
            display: flex;
            flex-direction: column;
            width:30%;
            height:80vh;
            background-color: rgb(211, 211, 211);
        }
        .write-text-container{
            width:100%;
            height:10vh;
            background-color: rgb(255, 255, 255);
        }
        .write-box{
            display: flex;
            flex-direction: row;
            justify-content: center;

        }
        .input-box{
            outline: none;
            border: none;
            width: 80%;
            background-color: rgb(196, 202, 255);
            height: 10vh;
            margin: 0;
            padding: 0;
            resize: none;
        }
        .send-box{
            outline: none;
            border: none;
            width: 20%;
            height: 10vh;
        }
        .chats-container{
            background-color: pink;
            width:100%;
            display: flex;
            flex-direction: column;
            align-self: flex-start;
            overflow: auto;
        }
        .receiver-container{
            background-color: rgb(245, 133, 133);
            width: 100%;
            align-self: flex-start;
            display:flex;
            flex-direction: row;
        }
        .sender-container{
            background-color: rgb(90, 155, 90);
            width: 100%;
            align-self: flex-start;
            display:flex;
            flex-direction: row;
            justify-content: end;
        }
        .chat-text-box{
            background-color: rgb(0, 17, 255);
            width: 40%;
            height: auto;
            padding: 10px;
            margin:10px;
            align-self: center;
        }
        #send-chat-btn{
            cursor: pointer;
            background-color: rgb(92, 56, 149);
            color: white;
        }
        #send-chat-btn:hover{
            background-color: rgb(151, 110, 216);
        }
    </style>
</head>
<body>

    Welcome <a href="/"> <%= user.username %> </a> to chats with <%= fr_user.name %>

    <form action="/user/logout" method="post">
        <button type="submit">Logout</button>
    </form>
    <div class="chat-container">
        <div class="chats-container">

            <% for(let i=0; i<msg.length; i++){ %>

                <% if(user._id == msg[i].from) { %>

                    <div class="sender-container">
                        <div class="chat-text-box">
                            <%= msg[i].data %>
                        </div>
                    </div>

                <% } else { %>
                    <div class="receiver-container">
                        <div class="chat-text-box">
                            <%= msg[i].data %>
                        </div>
                    </div>
                <% } %>
            
            <% } %>

            <div class="receiver-container">
                <div class="chat-text-box">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut ac faucibus leo, at finibus ligula. Pellentesque ullamcorper lobortis elit, a mollis enim vulputate id. Nulla elementum, eros vitae ultrices sollicitudin,
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    mi urna ornare quam, et vehicula leo leo eu purus. Proin malesuada leo dolor, sit amet volutpat elit tincidunt eget. Nam vitae semper ante. Fusce blandit tempus libero vehicula commodo. Etiam efficitur mattis suscipit. Nulla suscipit mi eget lacus congue imperdiet.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="receiver-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
            <div class="sender-container">
                <div class="chat-text-box">
                    Hi $$$$, I'm $$$$.
                </div>
            </div>
        </div>  
        <div class="write-text-container">
            <form action='/user/<%= user.id %>/push-msg' method="post" class="write-box">
                <textarea class="input-box" placeholder="Write your message here." ></textarea>
                <input type="submit" id="send-chat-btn" value="Send" class="send-box">
            </form>

        </div>
    </div>

</body>
</html>
